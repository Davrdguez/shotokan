---
/* src/pages/horarios-de-atencion.astro
   Página "Horarios de atención" — Shotokan Valladolid
   Astro + Tailwind • fondo #0A192F, texto blanco, acento rojo (red-600)
*/
import Layout from "../layouts/Layout.astro";
import "../styles/global.css";

const CONTACT = {
  name: "Centro Deportivo Shotokan",
  address: "Paseo de Zorrilla, 117, 47008 Valladolid",
  phone: "+34 983 272 632",
  email: "centrodeportivoshotokan@gmail.com",
  mapUrl:
    "https://www.google.com/maps?q=Paseo+de+Zorrilla+117+Valladolid&hl=es&z=16",
};

// Ajusta aquí tus horarios reales si cambian
const hours = [
  { day: "Lunes", open: "10:30", close: "22:00" },
  { day: "Martes", open: "17:30", close: "22:00" },
  { day: "Miércoles", open: "10:30", close: "22:00" },
  { day: "Jueves", open: "17:30", close: "22:00" },
  { day: "Viernes", open: "10:30", close: "22:00" },
  { day: "Sábado", open: null, close: null },   // Cerrado
  { day: "Domingo", open: null, close: null },  // Cerrado
];

const notices = [
  // Ejemplos. Puedes vaciar el array si no hay avisos.
  // { title: "Puente", text: "Cerrado el 12 de octubre (festivo).", type: "info" },
  // { title: "Exámenes de grado", text: "Atención reducida el sábado por evento interno.", type: "warning" },
];

const title = "Horarios de atención · Shotokan Valladolid";
const description =
  "Consulta los horarios de atención y apertura del Centro Deportivo Shotokan (Valladolid). Llama o escríbenos para reservas y primera clase de prueba.";
---

<Layout title={title} description={description}>
  <main class="bg-[#0A192F] text-white min-h-screen">
    <!-- HERO -->
    <section class="relative overflow-hidden border-b border-white/10">
      <div class="container mx-auto px-4 py-16 md:py-24">
        <p class="text-sm tracking-wider uppercase text-white/70">Información</p>
        <h1 class="mt-2 text-3xl md:text-5xl font-bold">Horarios de atención</h1>
        <p class="mt-4 max-w-2xl text-white/80">
          Si es tu primera vez, puedes venir en horario de atención o <a href="/contact" class="underline decoration-white/30 hover:decoration-white">contactarnos</a> para reservar una clase de prueba.
        </p>
      </div>
      <div class="pointer-events-none absolute -top-10 -right-10 h-44 w-44 rounded-full bg-red-600/20 blur-3xl"></div>
    </section>

    <!-- AVISOS -->
    {notices.length > 0 && (
      <section class="border-b border-white/10 bg-white/5">
        <div class="container mx-auto px-4 py-6 space-y-3">
          {notices.map((n) => (
            <div class={`rounded-xl border px-4 py-3 ${n.type === "warning" ? "border-red-600/50" : "border-white/10"}`}>
              <p class="font-semibold">{n.title}</p>
              <p class="text-white/80">{n.text}</p>
            </div>
          ))}
        </div>
      </section>
    )}

    <!-- HORARIO SEMANAL -->
    <section class="container mx-auto px-4 py-16 md:py-24 grid lg:grid-cols-[1.1fr_0.9fr] gap-10 items-start">
      <div>
        <h2 class="text-2xl md:text-3xl font-semibold">Apertura del dojo</h2>
        <p class="mt-2 text-white/80">Atención en recepción y acceso a clases según el cuadrante del grupo.</p>

        <div class="mt-6 overflow-hidden rounded-2xl border border-white/10 bg-white/5">
          <div class="grid grid-cols-2 sm:grid-cols-3 bg-white/5 px-4 py-3 text-sm text-white/70">
            <span>Día</span>
            <span class="sm:text-center">Apertura</span>
            <span class="hidden sm:block text-right sm:text-center">Cierre</span>
          </div>
          <ul>
            {hours.map((h, idx) => (
              <li class="grid grid-cols-2 sm:grid-cols-3 items-center px-4 py-3 border-t border-white/10 data-[today=true]:bg-white/10" data-day={idx}>
                <span class="font-medium">{h.day}</span>
                <span class="sm:text-center">
                  {h.open ? `${h.open} h` : <span class="opacity-70">Cerrado</span>}
                </span>
                <span class="hidden sm:block sm:text-center">
                  {h.close ? `${h.close} h` : <span class="opacity-70">—</span>}
                </span>
              </li>
            ))}
          </ul>
          <div class="px-4 py-3 text-xs text-white/60 border-t border-white/10">
            * El horario puede variar por festivos o eventos. Consulta nuestros
            <a href="/blog" class="underline decoration-white/30 hover:decoration-white">avisos</a>
            o llámanos.
          </div>
        </div>

        <div class="mt-6 text-sm text-white/80">
          <p><strong>Dirección:</strong> {CONTACT.address}</p>
          <p><strong>Tel.:</strong> {CONTACT.phone}</p>
          <p><strong>Email:</strong> <a class="underline decoration-white/30 hover:decoration-white" href={`mailto:${CONTACT.email}`}>{CONTACT.email}</a></p>
        </div>

        <div class="mt-8 flex flex-wrap gap-3">
          <a href="/contact" class="inline-flex items-center rounded-xl bg-red-600 px-5 py-3 font-medium hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-600/50">
            Contactar
          </a>
          <a href="/classes" class="inline-flex items-center rounded-xl border border-white/10 px-5 py-3 font-medium hover:bg-white/5">
            Ver actividades
          </a>
        </div>
      </div>

      <!-- MAPA / CÓMO LLEGAR -->
      <aside>
        <h2 class="text-2xl md:text-3xl font-semibold">Cómo llegar</h2>
        <p class="mt-2 text-white/80">P.º de Zorrilla, 117 — 47008 Valladolid</p>

        <div class="mt-6 aspect-[4/3] w-full overflow-hidden rounded-2xl border border-white/10 bg-white/5">
          <iframe
            title="Mapa Centro Deportivo Shotokan"
            class="h-full w-full"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            src={`https://www.google.com/maps/embed/v1/place?key=AIzaSyD-PLACEHOLDER-KEY&q=${encodeURIComponent(CONTACT.address)}`}
          ></iframe>
        </div>

        <a href={CONTACT.mapUrl} target="_blank" rel="noopener" class="mt-3 inline-flex items-center underline decoration-white/30 hover:decoration-white">
          Abrir en Google Maps
        </a>

        <div class="mt-8 rounded-2xl border border-white/10 bg-white/5 p-6">
          <h3 class="font-semibold">¿Vienes a probar?</h3>
          <p class="mt-2 text-white/80">Recomendamos llegar 10 minutos antes para explicarte la dinámica del grupo.</p>
          <a href="/schedule" class="mt-4 inline-flex items-center rounded-xl border border-white/10 px-5 py-3 font-medium hover:bg-white/5">Ver cuadrante</a>
        </div>
      </aside>
    </section>

    <!-- CTA FINAL -->
    <section class="border-t border-white/10 relative overflow-hidden">
      <div class="container mx-auto px-4 py-16 md:py-24 text-center">
        <h2 class="text-2xl md:text-3xl font-semibold">¿Tienes dudas sobre el horario?</h2>
        <p class="mt-3 text-white/80">Escríbenos por correo o llámanos; estaremos encantados de ayudarte.</p>
        <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-3">
          <a href="/contact" class="inline-flex items-center justify-center rounded-xl bg-red-600 px-5 py-3 font-medium hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-600/50">Contacto</a>
          <a href={`mailto:${CONTACT.email}`} class="inline-flex items-center justify-center rounded-xl border border-white/10 px-5 py-3 font-medium hover:bg-white/5">{CONTACT.email}</a>
        </div>
      </div>
      <div class="pointer-events-none absolute -bottom-20 -left-20 h-56 w-56 rounded-full bg-red-600/20 blur-3xl"></div>
    </section>
  </main>

  <!-- JSON-LD LocalBusiness con horario -->
  <script type="application/ld+json" is:inline>
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "SportsActivityLocation",
      "name": CONTACT.name,
      "address": CONTACT.address,
      "telephone": CONTACT.phone,
      "email": CONTACT.email,
      "openingHoursSpecification": hours.map((h, i) => {
        // schema.org usa English dayOfWeek: Monday..Sunday
        const map = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
        return {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": map[i],
          ...(h.open && h.close ? { "opens": h.open, "closes": h.close } : { "opens": "00:00", "closes": "00:00" })
        }
      })
    })}
  </script>

  <!-- Script para resaltar el día actual (zona Europa/Madrid) -->
  <script is:inline>
    (function () {
      try {
        const now = new Date();
        // getDay(): 0=domingo..6=sábado; queremos 0=lunes..6=domingo
        let idx = now.getDay(); // 0..6 (domingo..sábado)
        idx = idx === 0 ? 6 : idx - 1; // L=0, M=1, ... D=6
        const items = document.querySelectorAll("[data-day]");
        items.forEach((el) => el.dataset.today = "false");
        const today = document.querySelector(`[data-day="${idx}"]`);
        if (today) today.dataset.today = "true";
      } catch (e) {}
    })();
  </script>
</Layout>
